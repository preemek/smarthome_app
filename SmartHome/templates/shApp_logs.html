{% extends 'shApp_base_template.html' %}

{% block title %} Logs {% endblock %}

{% block body %} 
<nav class="navbar navbar-expand-lg bg-body-tertiary">
  <div class="container-fluid">
  <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="navbar-brand" href="{% url 'smart_home' %}"><i class="fa-solid fa-house-signal"></i> Smart Home</a>
        </li>
        <li class="nav-item">
          <a class="navbar-brand" href="{% url 'devices' %}"><i class="fa-regular fa-lightbulb"></i>&nbsp;&nbsp;Device control</a>
        </li>   
        <li class="nav-item">
          <a class="navbar-brand" href="{% url 'stats' %}"><i class="fa-solid fa-chart-line"></i>&nbsp;&nbsp;Charts and statistics</a>
        </li>  
      </ul>
      <ul class="navbar-nav mx-auto">
        <li class="nav-item">
          <h4><i class="fa-regular fa-rectangle-list"></i> Logs</h4>
        </li>
      </ul>  
      {% if user.is_authenticated %}
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <form method="post" action="{% url 'logout' %}" > 
              {% csrf_token %} 
              <button class="btn btn-secondary" type="submit">Log&nbsp;out&nbsp;<i class="fa-solid fa-arrow-right-to-bracket"></i></button> 
          </form>
        </li>  
      </ul>
      {% endif %} 
    </div>
  </div>
</nav>
{% if logs|length > 0 %}
    <br>
    <h6>{{ user.username }} there are {{ logs|length }} 
        {% if logs|length == 1 %}
            row in log.
        {% else %}
            rows in log.
        {% endif %}
    </h6>
    <div data-bs-spy="scroll" data-bs-smooth-scroll="true" class="scrollspy-example bg-body-tertiary p-3 rounded-2" tabindex="0">
        <div class="container text-center">
            <div class="row align-items-start">
                <div class="col" style="text-align: left">
                    <p>turn on timestamp</p>
                </div>
                <div class="col" style="text-align: center">
                    <p>device name</p>
                </div>
                <div class="col" style="text-align: left">
                    <p>owner</p>                    
                </div>
                <div class="col"  style="text-align: left">
                    <p>power in watts</p>
                </div>
                <div class="col" style="text-align: left">
                    <p>turn off timestamp</p>
                </div>
                <div class="col" style="text-align: left">
                    <p>time in seconds</p>
                </div>
            </div>
            {% for log in logs %}
            <div class="row align-items-start">
                <div class="col" style="text-align: left">
                    {{ log.on_timestamp }}
                </div>
                <div class="col" style="text-align: left">
                    {{ log.device }}
                </div>
                <div class="col" style="text-align: left">
                    {{ log.owner }}
                </div>
                <div class="col"  style="text-align: left">
                    {{ log.power_in_watts }}
                </div>
                <div class="col"  style="text-align: left">
                    {{ log.off_timestamp }}
                </div>
                <div class="col"  style="text-align: left">
                    {{ log.time_in_seconds }}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

{% endif %}
{% endblock %}